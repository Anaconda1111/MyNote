### 一、GCC的相关参数

1.  -o：指定生成的文件名
2.  -I ：指定头文件目录
3.  -D：编译时定义宏（可以不用在代码内定义）
4.  -O：编译优化等级 0~3
5.  -Wall：输出警告信息
6.  -g：包含调试信息
7.  -c：生成二进制文件

### 二、静态库

### 2.1 命名规则

​	静态库文件的命名规则一律为： lib + 文件名 + .a  例如：libMyTest.a

### 2.2 制作步骤

1.  将需要的.c文件全部生成.o文件

 	2. 使用ar工具打包成静态库： ar  rcs  +静态库的名称 +所有需要的.o

### 2.3 使用步骤

​	提供给第三方的只有包含头文件的include文件夹和包含静态库的lib文件夹。其中头文件展示接口，让第三方知道该如何使用，lib则是包含实现。
​	具体为：gcc main.c  lib/静态库文件名   -o 文件名  -I头文件目录或：gcc main.c -L lib -l myTest -o 文件名 -I头文件目录。需要注意的是，第二种方法中L指定静态库目录，l指定静态库名称，且这个名称是掐头去尾的。

### 三、动态库

​	动态库文件不将.o文件添加到可执行文件中，而是在运行时将其添加到进程的共享区，因此在语法上跟静态库有点不同。

### 3.1 命名规则

​	动态库文件的命名规则一律为：lib + 文件名 + .so

### 3.2 制作步骤

1.  将.c文件打包成与位置无关的.o文件：gcc -fPIC  -c *.c  -I/头文件路径

 	2. 将.o文件打包成动态库文件： gcc -shared -o  动态库名  *.o   -I/头文件路径

### 3.3 动态库的使用

​	发送给第三方时与静态库一样，将头文件目录与lib目录打包后一并送过去即可。在使用动态库的时候，需要用连接器连接所需的动态库文件，有四种方法：

1.  将动态库文件拷贝到系统lib目录下（可以但不允许这样操作）
2.  对环境变量LD_LIBRARY_PATH进行赋值，export  LD_LIBRARY_PATH   +动态库的绝对路径。但注意在关闭终端后再开启时这种赋值将失效，属于临时修改，只适用于写代码时调试用。
3.  将export  LD_LIBRARY_PATH   +动态库的绝对路径  这句命令写入家目录的隐藏文件夹 .bashrc中。因为终端每一次开启都要执行这个文件中的内容，所以写入后可以永久修改，但很少人用这个方法。
4.  第四种方法比较复杂，有三个步骤： 1. 打开动态链接器的配置文件，具体位于/etc/ld.so.conf。 2. 修改其中的内容，将动态库文件的绝对路径添加到里面。 3. 更新连接器：  sudo ldconfig -v