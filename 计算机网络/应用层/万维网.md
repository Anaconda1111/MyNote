## 一、概述

​	万维网是一个分布式的超媒体系统，它是超文本系统的扩充，而超文本是指包含指向其他内容的链接的文本。万维网使得从一个站点访问另一个站点的方式非常方便，即点击连接。

### 	存在的问题：

​	(1) 怎样**标志**分布在互联网上的各个万维网文档

​	(2) 使用什么样的协议来实现各种链接

​	(3) 不同风格的文档，都能在互联网上的各个主机上显示且用户清楚的知道在什么地方存在链接

​	(4) 怎样使用户方便地找到所需的信息

​	上述四个问题的答案分别是1. URL文档标识符 2.超文本传送协议HTTP 3.超文本标记语言HTML 4.搜索工具（搜索引擎）

## 二、URL（统一资源定位标识符）

​	URL用于表示从互联网上得到的资源位置和访问它们的方法，互联网上的所有资源，都有一个唯一确定的URL。URL的格式为：**协议：//主机名：端口/路径**，其中端口往往是被省略的部分。

 *    协议：指出是用何种协议来获取万维网文档，最常见的就是HTTP

 *    主机名：是文档所在主机的域名，通常以WWW开头，也可以用点分十进制的IP地址替换

 *    端口：就是端口号，常被省略，因为端口号通常默认为协议的端口号，例如HTTP协议的端口号为80

 *    路径：文档存放的路径

         	一个例子：http://www.tsinghua.edu.cn/publish/newthu/newthu_cnt/faculties/index.html
      其中www.tsinghua.edu.cn就是文档域名，publish/newthu/newthu_cnt/faculties/index.html就是文档路径

## 三、超文本传送协议HTTP

​	协议HTTP定义了浏览器怎样向万维网服务器请求文档，以及服务器怎样把文档传给浏览器。每个万维网服务器都有一个进程在不断监听80端口是否有浏览器向它发送建立连接的请求，以但监听到请求后便与其建立TCP连接，然后浏览器就可以向万维网服务器发出浏览文档的请求，服务器接着返回所请求的内容作为响应，在完成任务后释放TCP连接。1.操作过程

### 3.1 操作过程：

​	在用户点击了某个万维网文档时，首先与服务器建立TCP连接，这需要使用三报文握手，在前两个报文完成后（即消耗了一个RTT时间），浏览器将HTTP请求报文作为完成第三个TCP连接的握手报文发送给服务器，服务器接收到后返回所请求的文档作为响应（这里再消耗一个RTT时间+传输文档的时间）。可以看出请求一个万维网文档所需的时间是传输该文档的时间加上两倍RTT。
​		![](D:\DaSan\note\计算机网络\应用层\图片\万维网传输.png)

​	HTTP/1.0的缺点就在于每请求一个文档都要消耗两倍RTT时间，如果一个文档内存在多个可连接的对象（例如图像），那么每次都需要重新进行TCP连接，这会增添时间的开销以及占用服务器资源，这种**非持续连接**会使服务器负担很重。
​	HTTP/1.1使用**持续连接**解决了这个问题，持续连接就是万维网服务器在发送响应后一段时间内仍然保存这条连接，这并不局限于同一个页面上的链接，只要文档都在同一个服务器上就行。HTTP/1.1的持续连接有两种工作方式，非流水方式与流水方式。

 *    非流水方式：在客户收到一个响应后才发出下一个请求，在持续连接的基础上，（与HTTP/1.0相比）每次下载文档都节省了一个RTT的开销。

 *    流水线方式：在收到HTTP的响应报文前就发送新的报文请求，在一个个的请求报文到达服务器后，服务器可以连续发回响应报文，使用流水线方式时，客户访问所有的对象都只需要一个RTT时间。

      ​	HTTP/2是1.1的升级版本，主要改进为：1.把服务器的响应变成可并行发回。2.允许客户复用TCP进行多个请求。

      

      ### 3.2 代理服务器

      ​	代理服务器，又被称为万维网高速缓存。代理服务器把最近的一些请求和响应暂时储存在磁盘中。当新的请求到达时，若代理服务器发现这个请求与缓存中的请求相同，就返回暂存的响应，而不需要再去访问万维网服务器。在多人使用万维网的情况下，代理服务器可以节省网络资源，提高网速。
      

      ### 3.3 HTTP报文结构

      ​	HTTP有两类报文，分别是请求报文与响应报文。二者的主要区别在于报文结构的开始行。

      #### 3.3.1 请求报文

      ​	<img src="D:\DaSan\note\计算机网络\应用层\图片\请求报文.png"  />

      ​	开始行中的方法为对所请求的对象进行的**操作**，例如GET,POST,DELETE，POST常用于需要向万维网服务器发送一些数据的情形，例如登录时需要输入账号密码，DELETE用于删除URL所标志的资源。版本为HTTP的版本，例如HTTP/1.1，下面是一个完整的HTTP请求报文的例子：
      ​	GET /dir/index.html HTTP/1.1    	使用了相对URL
      ​	Host: www.xyz.eud.cn					此行是首部行的开始，给出主机域名
      ​	Connection：close					 	告诉服务器发送完请求文档后可释放连接
      ​	User-Agent：Mozilla/5.0				表明用户使用火狐浏览器
      ​	Accept-Language：cn                   表明用户希望收到中文文档
      ​														   请求报文最后还有一个空行

      #### 3.3.2 响应报文

      ![](D:\DaSan\note\计算机网络\应用层\图片\响应报文.png)

      开始行的版本为HTTP的版本，状态码包括三个数字，分为五大类：
      	1xx：表示通知信息，如收到请求正在处理
      	2xx：表示成功。（常见的如200：OK）
      	3xx：表示重定向，如要完成请求还需采取进一步的行动
      	4xx：表示客户的差错，如请求中有错误的语法（常见的如404：NOT FOUND）
      	5xx：表示服务器的差错，如服务器失效无法完成请求

      ### 3.4 在服务器上存放用户信息（Cookie）

      ​	HTTP本身是无状态的，但在一些特殊情形下，万维网服务器需要识别用户，例如购物网站，顾客需要购买多种商品时，会将某件选好的物品放入购物车，然后他还希望浏览其他物品，因此，服务器需要记住用户的身份，使他接着希望购买的物品放在同一个购物车中，实现这项需求的技术称为Cookie。
      ​	Cookie的工作方式：当用户A浏览某个使用Cookie的网站时，该网站的服务器为A生成一个唯一的识别码，并以此为索引在后端数据库中产生一个项目来记录需要保存的数据。在给A的HTTP响应报文中添加一个叫做Set-Cookie的首部行，例如 Set-Cookie：31d4d96e407aad42。当A收到这个响应报文时，在浏览器的特定Cookie文件中添加一行，其中包括服务器主机名和Cookie识别码，当A继续浏览网站时，每发送一个HTTP请求报文，浏览器就会在Cookie文件中取出这个网站的识别码并放到请求报文的Cookie首部行中：Cookie：31d4d96e407aad42，于是这个网站就能跟踪用户A的的活动进行数据记录或其他操作。